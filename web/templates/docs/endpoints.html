{% extends "base.html" %}

{% block title %}Endpoints - API Docs{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-lg-3 mb-4">
            <div class="card shadow-sm sticky-top" style="top: 80px;">
                <div class="card-body">
                    <h6 class="text-muted mb-3">DOCUMENTATION</h6>
                    <nav class="nav flex-column">
                        <a class="nav-link" href="{{ url_for('api_docs.index') }}">
                            <i class="bi bi-house me-2"></i>Overview
                        </a>
                        <a class="nav-link" href="{{ url_for('api_docs.authentication') }}">
                            <i class="bi bi-key me-2"></i>Authentication
                        </a>
                        <a class="nav-link active" href="{{ url_for('api_docs.endpoints') }}">
                            <i class="bi bi-diagram-3 me-2"></i>Endpoints
                        </a>
                        <a class="nav-link" href="{{ url_for('api_docs.examples') }}">
                            <i class="bi bi-code-slash me-2"></i>Examples
                        </a>
                    </nav>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-9">
            <h1 class="mb-4">API Endpoints</h1>

            <!-- Generate Endpoint -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <span class="badge bg-light text-success me-2">POST</span>
                    <code class="text-white">/api/generate</code>
                </div>
                <div class="card-body">
                    <h5>Generate Synthetic Data</h5>
                    <p>Generate synthetic data based on the provided schema.</p>

                    <h6 class="mt-4">Request Body</h6>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>rows</code></td>
                                    <td>integer</td>
                                    <td><span class="badge bg-danger">Required</span></td>
                                    <td>Number of rows to generate (1-100,000)</td>
                                </tr>
                                <tr>
                                    <td><code>format</code></td>
                                    <td>string</td>
                                    <td><span class="badge bg-secondary">Optional</span></td>
                                    <td>Output format: <code>json</code>, <code>csv</code>, or <code>sql</code>. Default: <code>json</code></td>
                                </tr>
                                <tr>
                                    <td><code>table_name</code></td>
                                    <td>string</td>
                                    <td><span class="badge bg-secondary">Optional</span></td>
                                    <td>Table name for SQL format. Default: <code>synthetic_data</code></td>
                                </tr>
                                <tr>
                                    <td><code>fields</code></td>
                                    <td>array</td>
                                    <td><span class="badge bg-danger">Required</span></td>
                                    <td>Array of field definitions (see below)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h6 class="mt-4">Field Object</h6>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th>Property</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>name</code></td>
                                    <td>string</td>
                                    <td><span class="badge bg-danger">Required</span></td>
                                    <td>Field name (column name)</td>
                                </tr>
                                <tr>
                                    <td><code>type</code></td>
                                    <td>string</td>
                                    <td><span class="badge bg-danger">Required</span></td>
                                    <td>Data type (see supported types)</td>
                                </tr>
                                <tr>
                                    <td><code>constraints</code></td>
                                    <td>object</td>
                                    <td><span class="badge bg-secondary">Optional</span></td>
                                    <td>Type-specific constraints</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h6 class="mt-4">Example Request</h6>
                    <div class="bg-dark text-light p-3 rounded">
<pre class="mb-0"><code>{
  "rows": 100,
  "format": "json",
  "fields": [
    {
      "name": "id",
      "type": "integer",
      "constraints": {"min": 1, "max": 10000}
    },
    {
      "name": "email",
      "type": "email"
    },
    {
      "name": "created_at",
      "type": "date",
      "constraints": {"start": "2024-01-01", "end": "2024-12-31"}
    }
  ]
}</code></pre>
                    </div>

                    <h6 class="mt-4">Response</h6>
                    <div class="bg-dark text-light p-3 rounded">
<pre class="mb-0"><code>{
  "success": true,
  "data": "[{\"id\": 4521, \"email\": \"john@example.com\", \"created_at\": \"2024-03-15\"}, ...]",
  "rows": 100,
  "format": "json"
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Health Check Endpoint -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <span class="badge bg-light text-primary me-2">GET</span>
                    <code class="text-white">/api/health</code>
                </div>
                <div class="card-body">
                    <h5>Health Check</h5>
                    <p>Check if the API is running and healthy. No authentication required.</p>

                    <h6 class="mt-4">Response</h6>
                    <div class="bg-dark text-light p-3 rounded">
<pre class="mb-0"><code>{
  "status": "healthy",
  "version": "1.0.0"
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Types Endpoint -->
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <span class="badge bg-light text-primary me-2">GET</span>
                    <code class="text-white">/api/types</code>
                </div>
                <div class="card-body">
                    <h5>List Data Types</h5>
                    <p>Get a list of all supported data types and their constraints. No authentication required.</p>

                    <h6 class="mt-4">Response</h6>
                    <div class="bg-dark text-light p-3 rounded">
<pre class="mb-0"><code>{
  "types": [
    {"type": "integer", "constraints": ["min", "max"]},
    {"type": "float", "constraints": ["min", "max", "precision"]},
    {"type": "string", "constraints": ["min_length", "max_length"]},
    {"type": "email", "constraints": []},
    {"type": "name", "constraints": []},
    ...
  ]
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
